# 提示词清单与变量说明（PROMPT_MANIFEST）

> **范围说明（必须先读）**
>
> - 本仓库的**可复现主实验**仅覆盖 **Prompt B 及其扰动版本（conflict / long / weak）**，并对应 `01_实验设计/问题集.jsonl` 与 `04_实验结果/` 下的统计汇总。
> - `00_baseline_prompt_A.txt` 属于**先导探索（pilot）**提示词资产：用于形成研究动机与暴露问题，但当前仓库不提供其完整题集对照与汇总结果，因此 **A 不参与本次主实验的定量对比**。

本目录包含本项目使用的提示词版本（`*.txt`）。这些提示词不是“更好/更差”的线性迭代关系，而是围绕同一评测目标构造的**可对照变量**：通过最小差分（minimal diffs）形成一个 *prompt perturbation space*，用于观察与量化 **Prompt Drift**（指令遵循下降、结构崩坏、语义漂移、约束漏失等）。

> 一句话记忆：**主实验以 B 为基座；B 的变体用于构造扰动空间；A 仅作为 pilot 留档。**

---

## 1. 文件清单

- `00_baseline_prompt_A.txt`（pilot baseline）
- `01_structured_prompt_B.txt`（主实验基座 / protocol prompt）
- `02_conflict_prompt.txt`（B-variant：conflict）
- `03_long_prompt.txt`（B-variant：long）
- `04_weak_prompt.txt`（B-variant：weak）

---

## 2. 角色分工：A（pilot）与 B（主实验基座）

### 2.1 Prompt A：先导探索（Pilot Baseline）

**定位**：用于早期探索与动机形成的提示词资产（pilot）。目标是快速暴露“缺少强结构约束时，输出会如何偏离预期”。

**常见暴露点（示例）**：
- 自发变体裁（回到讲解/诊断/辩论）
- 忽略或改写格式要求
- 语义漂移（答非所问）
- 关键约束被静默遗漏（silent failures）

> A 的作用是“解释为什么需要协议化”，而不是“参与主实验对照”。

### 2.2 Prompt B：协议化主提示词（Structured / Protocol Prompt）

**动机**：pilot 可以观察现象，但往往难以稳定计量。

因此引入 Prompt B：把输出目标写成“协议执行”，让漂移与崩坏能被统一 rubric 识别、统计与回溯。

**B 的核心变化**：
- 输出结构固定（段落/字段/顺序明确）
- 关键约束尽量可验证（字段齐全、禁止额外正文、格式可解析等）

---

## 3. 主实验扰动空间：B 的三个最小差分变体

这三个版本都以 B 为基座，分别只改变一个主要维度（尽量避免混杂变量），用于覆盖常见的 prompt 扰动类型。

### 3.1 `02_conflict_prompt.txt`：指令张力（Conflict / Priority Tension）

**测试点**：当存在张力或潜在冲突指令时，模型如何分配优先级（遵循结构协议 vs 完成内容任务）。

**典型风险**：
- 隐式“任务重写”（绕开协议字段）
- 优先级不稳定（同一输入多次输出风格漂移）
- 对齐覆盖（把低优先级内容当作高优先级指令执行）

### 3.2 `03_long_prompt.txt`：长度与冗余（Long / Redundancy）

**测试点**：更长、更详细的提示是否真的提升遵循率，还是引入新的失败模式。

**典型风险**：
- 注意力稀释 / 关键约束被淹没
- 局部遗忘 / 只遵循部分要求
- 模型自行重写目标（把协议理解为“建议”）

### 3.3 `04_weak_prompt.txt`：弱化约束（Weak / Soft Constraints）

**测试点**：当约束从“必须”变为“尽量/建议”，模型是否回退为自然对话分布。

**典型风险**：
- 结构崩坏（字段缺失/顺序错乱/夹带额外正文）
- 表面相关但漏关键约束（silent failures 增加）

---

## 4. 命名约定与可复现纪律

### 4.1 命名约定

- `00/01/02/...`：保证文件系统排序即为变量呈现顺序
- `baseline/structured/long/weak/conflict`：描述“最小差分类型”
- `A/B`：仅表示“pilot vs 主实验基座”的角色分工，不表示优劣

### 4.2 最小差分（minimal diffs）原则

新增或修改提示词版本时，建议遵守：

1. **单因素**：一次只测试一个假设（长度、冲突、约束强度、示例位置等）
2. **可复核**：变化点能被清晰指出（diff 可读）
3. **可回溯**：结果能在 `04_实验结果/` 中按同一维度对照汇总

---

## 5. 使用方式（如何接入评测）

### 5.1 主实验（统计口径）

主实验建议固定：
- 题集：`01_实验设计/问题集.jsonl`
- 提示词：`01_structured_prompt_B.txt` 及其变体（`conflict / long / weak`）
- 模型与采样参数：temperature、top_p、seed、运行次数等（以 `01_实验设计/实验协议.yaml` 为准）

### 5.2 先导探索（可选）

如需复盘动机形成阶段的样例，可使用 `00_baseline_prompt_A.txt` 进行补充运行；但应与主实验统计表分离，避免混用口径。

### 5.3 注释策略

- 提示词本体（`*.txt`）尽量保持干净，不写解释性注释
- 解释与变量定义集中放在本文件，便于统一维护与审阅

---

## 6. 与评测规则的对应关系

提示词版本负责构造“输入扰动”，评测规则负责判定“输出行为”。

- 评测协议：`03_评测规则/EVAL_PROTOCOL.md`
- 评委提示词：`03_评测规则/JUDGE_PROMPT.md`
- 维度解释：`03_评测规则/02_行为评分维度说明.md`

本文件只定义 **prompt 变量空间**，不在这里重复 rubric 细节。
