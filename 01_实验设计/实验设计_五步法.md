# 实验协议｜Prompt Drift Lab（五步法）

本实验通过构建一组包含基线、主实验条件及多种单因素消融的提示词集合，
系统分析 Prompt Drift 的触发方式与表现形式。

> 目标：研究 LLM 在提示词版本变化、约束强弱与指令冲突下的「结构遵循稳定性」与「提示词漂移（prompt drift）」；将零散输出升级为可复现评测流程与结论。

---

## 0. 实验对象与输入

### 0.1 模型与运行条件
- 模型：ChatGPT-5.2 extended thinking（网页端）
- 采样参数：网页端不可控（温度等不固定）
- 输出环境：要求支持 canvas 展示（外层允许包含“问题 + 回答”包装）

> 注：本实验将“canvas 外层包装”视为允许项，不计入三段式合规判定。

### 0.2 提示词版本（自变量）
- Prompt A：原始三段式转译器（baseline）
- Prompt B：增强版三段式研究级提示词生成器（revised）
- 变体组（用于压力测试/归因）：
  - conflict：结构冲突/多目标竞争版本
  - long：超长上下文版本
  - weak：弱约束基线版本

### 0.3 固定题集（控制变量）
- Q1（日常-事实型）：上海最近 3 天天气如何？
- Q2（日常-技能型）：雨天街拍时 ISO 一般如何设置？
- Q3（机制型极限）：提示词越长越听话吗？为什么？
- Q4（机制型极限）：为什么让模型按固定格式输出经常失败？

---

## Step 1｜材料固定与原始输出采集

### 目标
在同一题集上，分别用不同提示词版本生成输出，形成可回溯的原始证据（PDF/文本）。

### 输入
- 提示词版本（Prompt A / Prompt B / 各变体）
- 固定题集（Q1–Q4）

### 产物（Artifacts）
- 原始输出（推荐 PDF 保存）
- 文件命名包含：版本/题号/日期（便于追溯）
- 建议放置：
  - `提示词A测试/`、`提示词B测试/`
  - `04_实验结果/raw_outputs/{conflict,long,weak}/`

---

## Step 2｜评测标准设计（Rubric）

### 目标
将“好坏判断”落地为可执行量表，包含硬性合规与软性质量。

### 评测量表组成
1) **硬性结构合规（pass/fail 或计分）**
- 是否严格三段式（不多段、不寒暄）
- 每段是否满足字数/结构要求
- 是否出现禁止内容
- 允许项：外层 canvas 的“问题+回答”包装

2) **软性质量（带明确判据）**
- 事实快照：非复述、信息密度、必要的不确定性声明
- ChatGPT 联网搜索段：可执行、交叉验证、时间戳与来源链接、结构化输出要求
- Gemini 深挖段：研究计划、分歧点、证据对比表、边界条件

### 产物
- `03_评测规则/01_硬性结构合规评分标准.md`
- `03_评测规则/02_软性质量评分维度定义.md`

---

## Step 3｜对照评测与失败模式归因

### 目标
基于 Step2 量表对 Step1 输出进行评测，形成对照结论与错误分析。

### 过程
- Step3-2：逐份输出打分（硬性合规 + 软性质量）
- Step3-3：汇总对照表，提炼 Top failure modes（机制层描述）

### 产物
- `04_实验结果/data/step3_scores.csv`（或 xlsx）
- `04_实验结果/step3_结果总览表.md`
- `04_实验结果/step3_失败模式归因.md`
- （可保留子分析）`04_实验结果/阶段二_结构遵循结果分析.md`

---

## Step 4｜讨论与设计启示（Discussion）

### 目标
将 Step3 的“结果与错误分析”上升为可迁移结论：哪些是提示词设计导致，哪些可能是模型边界；给出最小补丁建议。

### 产物
- `04_实验结果/step4_讨论与设计启示.md`
  - Key Findings
  - Interpretation（基于本实验观察）
  - Design Implications
  - Minimal Patches（≤3/变体）
  - Threats to Validity（限制与外推边界）

---

## Step 5｜对外呈现（Workshop/Report）

### 目标
把五步闭环打包成读者 5 分钟能理解、可复现的材料。

### 产物（二选一或都做）
- 1–2 页 short report（推荐）
- README 升级：加入实验协议入口、Step3 表格、Step4 结论

---

## 目录约定（建议）

- `01_实验设计/`：实验协议、变量定义、题集说明
- `02_提示词版本/`：所有提示词版本（含变体）
- `03_评测规则/`：rubric 与评测口径
- `04_实验结果/`：评分数据、总览表、归因、讨论、raw outputs

