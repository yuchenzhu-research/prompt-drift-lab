# 方法论补充与对照依据（Prompt Drift Lab · Methodological Addenda and Controls）

本目录用于**补齐评测设计的依据与约束**，以确保对照公平、结论可归因、实验产物可审计。

需要强调的是：本目录**不新增任何跑分结果**。其目标在于帮助读者清晰理解：

- 本仓库的对照体系是如何建立的；
- 对照是否满足最小差分与公平性要求；
- 结论可以如何被复核、审计与在边界清晰的前提下扩展。

---

## 1. 目录职责

在 Prompt Drift 的工程化评测中，质疑通常集中于以下三类问题：

- **对照是否公平**：A/B 是否构成最小差分，是否无意中引入额外变量；
- **结论是否可归因**：观察到的差异是否来自 prompt 微扰本身，而非采样波动、judge 偏置或清洗策略；
- **主线锚点是否合理**：为何选择 B 作为后续微扰的基准（anchor），而非 A。

本目录对上述问题给出统一、可审计的回答，并提供对应的检查与复核入口。

---

## 2. A/B 对照在本仓库中的定位

在本仓库中，提示词版本被赋予不同的实验角色，而非简单的“好坏”区分：

- **Prompt A**：自然语言风格更强、结构约束较弱，用于提供更接近真实世界弱约束交互场景的参照下界；
- **Prompt B**：结构化约束更强，包含显式字段、顺序要求与禁止项等硬约束，用作后续微扰空间的锚点。

A/B 对照的目的并非证明“结构化一定更优”，而是**建立一个可重复触发、可量化观察 prompt drift 的参考坐标系**，使后续微扰产生的退化方向具备一致且可解释的含义。

相关入口包括：

- Prompt 版本与差分说明：`02_prompt_variants/PROMPT_MANIFEST.md`
- 评测协议与 judge 提示词：`03_evaluation/EVAL_PROTOCOL.md`、`03_evaluation/JUDGE_PROMPT.md`
- 结果与证据汇总：`04_results/`

---

## 3. 以 Prompt B 作为后续微扰主线的选择标准

本仓库采用**可审计的工程标准**来选择 anchor，而非基于主观偏好。

### 3.1 可评测性优先

当某一提示词版本频繁触发 schema violation 并导致大量样本进入 invalid 集合时，统计结果容易被格式噪声主导，从而难以分析语义漂移与约束满足情况。Prompt B 的设计目标之一，是**提高进入可评测集合的样本比例**。

### 3.2 微扰空间的可解释性

以 Prompt B 为 anchor，后续微扰可被明确解释为**在同一约束体系上的单轴扰动**：

- **weak**：系统性弱化结构与硬约束强度；
- **long**：增加上下文负担与潜在干扰信息；
- **conflict**：引入指令张力，用于测试模型的优先级处理行为。

该设计使 drift 更容易映射到具体失败类型与潜在可修复点，而非停留在笼统的不稳定描述上。

### 3.3 跨模型可比性

在输出结构更稳定的前提下，不同 judge 模型更容易对齐评分对象，评分过程更少受到格式噪声干扰，从而提升跨模型比较的可信度。

---

## 4. 对照公平性与可审计性检查清单

为保证对照设计的公平性与结论的可审计性，本仓库遵循以下检查项：

- A/B 的核心差分仅限于结构化程度与约束强度，题目内容保持一致；
- 题集、模型、推理参数与 judge 协议在对照组之间保持一致；
- 原始输出（raw outputs）与 judge JSON 按样本逐一保留，支持从汇总表回溯到证据；
- invalid 的判定标准与评测协议一致，并保留对应的理由片段；
- 统计脚本与评测协议对齐，字段定义与计算口径保持一致；
- 在条件允许的情况下执行最小重复运行以观察方差，否则需在局限中明确披露。

---

## 5. 微扰类型与失败模式的映射关系

在分析与复核时，建议以**失败模式**为组织中心，而非先看汇总结果再补叙事：

- **weak**：更易出现格式漂移与硬约束遗漏；
- **long**：更易出现注意力分散、隐性约束失守与关键信息遗漏；
- **conflict**：更易出现优先级处理失败与模型自行折中决策。

所有结论均应回到证据链本身，包括对应的 PDF 输出片段与 judge JSON 中的评分理由。

---

## 6. 局限与风险控制

- A/B 对照仍可能包含提示词长度、语气等次要差分，需要在解释中控制措辞，并通过进一步对照或消融降低影响；
- anchor 的最优选择可能随模型变化，跨模型结论需明确适用边界；
- 自动 judge 可能存在结构偏好，可通过跨模型互评、自评、人工抽检或 judge 互换等方式降低偏置。