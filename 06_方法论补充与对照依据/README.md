# 06 方法论补充与对照依据

本目录用于补齐评测设计的依据与约束，确保对照公平、结论可归因、产物可审计。本目录不新增跑分结果，目标是让读者清晰理解本仓库的对照体系如何建立、如何复核、如何扩展。

---

## 1. 目录职责

在 Prompt Drift 的工程化评测中，最常见的质疑集中在三类问题：

- 对照是否公平：A/B 是否属于最小差分，是否引入额外变量
- 结论是否可归因：差异来自 prompt 微扰，还是采样波动、judge 偏置、清洗策略导致
- 主线锚点是否合理：为何以 B 作为后续微扰的基准，而不是 A

本目录给出上述问题的统一回答，并提供可执行的检查项。

---

## 2. A/B 对照在本仓库中的定位

本仓库将提示词版本分为 baseline 与 anchor 两种角色：

- Prompt A：自然语言风格更强、结构约束较弱，用于提供真实世界弱约束场景的参照下界
- Prompt B：结构化约束更强，包含字段、顺序与禁止项等硬约束，用于作为后续微扰空间的锚点

A/B 对照的目的不是证明结构化必然更优，而是建立一个可重复触发、可量化观察 drift 的坐标系，使后续微扰的退化方向具备一致解释。

相关入口：
- Prompt 版本与差分：`02_提示词版本/PROMPT_MANIFEST.md`
- 协议与 judge：`03_评测规则/EVAL_PROTOCOL.md`、`03_评测规则/JUDGE_PROMPT.md`
- 结果与证据：`04_实验结果/`

---

## 3. 以 B 作为后续微扰主线的选择标准

本仓库采用可审计标准选择 anchor，不依赖主观偏好：

1) 可评测性优先

当某提示词版本频繁触发 schema violation 并导致大量样本进入 invalid 集合，统计将被格式噪声主导，难以分析语义漂移与约束满足度。B 的设计目标之一是提高进入可评测集合的比例。

2) 微扰空间可解释

以 B 为 anchor，微扰可以被明确解释为对约束体系的单轴扰动：
- weak：弱化结构与硬约束强度
- long：增加上下文负担与潜在干扰信息
- conflict：引入指令张力以测试优先级处理

该设计使 drift 更容易映射到具体失败类型与可修复点，而不是停留在笼统的不稳定描述。

3) 跨模型可比性更强

结构更稳定时，跨模型 judge 的评分对象更一致，评分更少受格式噪声干扰。

---

## 4. 对照公平性与可审计性检查清单

- A/B 的核心差分仅围绕结构化与约束强度，题目内容保持一致
- 题集、模型、推理参数与 judge 协议在对照组间保持一致
- raw 输出与 judge JSON 逐样本保留，支持从汇总表回溯到证据
- invalid 的判定标准与协议一致，并保留理由片段
- 统计脚本与协议对齐，字段定义与计算口径一致
- 具备最小重复运行以观察方差，条件不足时需在局限中明确披露

---

## 5. 微扰类型与失败模式映射

建议以失败类型为中心组织阅读与分析，避免先看结果再补叙事。

- weak：更易出现格式漂移与硬约束遗漏
- long：更易出现注意力分散、隐性约束失守与关键信息遗漏
- conflict：更易出现优先级处理失败与自作主张的折中策略

结论应回到证据链：对应 PDF 片段与 judge JSON 的评分理由。

---

## 6. 局限与风险控制

- A/B 仍可能包含提示词长度、语气等次要差分，需要在解释中控制措辞并通过对照与消融降低影响
- anchor 的最优选择可能随模型变化，跨模型结果需明确边界
- 自动 judge 可能存在结构偏好，需要通过互评、自评、人工抽检或 judge 互换来降低偏置
