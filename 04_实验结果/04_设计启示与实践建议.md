# 04｜讨论与设计启示（Discussion, v2）
> 本文件回答：这些 Prompt Drift 现象意味着什么？如何用最小改动让提示词更稳？  
> 讨论必须绑定证据：结果见 `01_结构遵循结果总览.md`，分析见 `02_结构遵循与指令漂移分析.md`，失败模式见 `03_失败模式归因分析.md`。

---

## 1. 核心结论（只保留 3–5 条，条条可追溯）
- C1：整体来看，结构化提示词（P1）在 _______ 上更稳定/更不稳定（对应：R__ / FM__）。
- C2：最主要的不稳定性来自 _______（例如：第一段越界解释 / 额外段落噪声 / 第三段降级）（对应：FM__）。
- C3：机制型问题（Q3/Q4）更容易触发 _______ 类漂移（对应：FM__，规则：R__）。
- C4：当提示词引入冲突/冗长扰动时，最先退化的通常是 _______（对应：FM__）。
- C5：跨题一致性（R8）是区分“稳/不稳”提示词的关键指标之一（对应：FM7）。

---

## 2. 从失败模式到设计原则（Evidence → Principle）
> 每条原则都尽量对应一个失败模式（FM），并说明“它要防的是什么”。

### P1｜把“段落职责”写成不可混淆的角色卡（防 FM4/FM5）
- 观察：第二段/第三段容易同质化或不可执行（见 FM4/FM5）。
- 原则：每一段必须有**唯一职责 + 明确禁止做什么**，否则模型会用默认写作模板填空。

### P2｜对“触发词”做免疫（防 FM2/FM6/FM7）
- 观察：技能型/机制型题目会诱发建议/解释/总结（见 FM2/FM6）。
- 原则：对常见触发行为（解释、建议、总结、免责声明）应给出**显式禁止 + 纠错语句**。

### P3｜把“来源/可验证”从第一段隔离出去（防 FM3）
- 观察：强调可验证可能反向污染事实快照（见 FM3）。
- 原则：把“来源、链接、证据”要求**明确限定在第二段**，并在第一段写明“禁止出现来源字样”。

### P4｜宁可短而硬，不要长而软（防 FM1/FM5）
- 观察：冗长提示词可能导致目标层级混乱，第三段先退化（见 FM5），甚至引发结构坍塌（FM1）。
- 原则：结构约束应尽量“短句 + 必须/禁止”，减少解释性叙述，把长度留给“模板本体”。

### P5｜把“失败即回退策略”写进提示词（防 FM1/FM6）
- 观察：一旦模型开始跑偏，会连锁生成额外段落（FM6）并破坏结构（FM1）。
- 原则：加入一句**自检/回退**指令：检测到越界就立刻删掉多余内容，仅输出三段。

---

## 3. 最小改动清单（可直接粘贴进提示词）
> 规则：每个提示词版本 ≤3 条；每条必须说明它提升哪条规则/防哪个失败模式。  
> 你可以先只针对 P0/P1（或 Prompt A/B）写。

### 3.1 对 Prompt A / P0（baseline）的最小改动（≤3 条）
**改动 A1（提升：R1/R6；防：FM1/FM6）**  
> 在提示词末尾追加一条强约束（可直接粘贴）：
- 【硬约束】输出必须且只能包含三段（1/2/3）。如果你写了任何额外句子（开场白/总结/建议），立即删除它们，只保留三段。

**改动 A2（提升：R2/R3；防：FM2/FM3）**  
- 【第一段禁区】第 1 段 ≤50 字，只能写现象/结论；严禁出现解释、建议、以及“来源/链接/参考”等字样。

**改动 A3（提升：R4/R5；防：FM4/FM5）**  
- 【段落职责】第 2 段必须是“可复制的检索指令”，第 3 段必须是“机制研究指引（含研究计划+分歧+证据对照）”；两段不得重复或互相替代。

---

### 3.2 对 Prompt B / P1（structured）的最小改动（≤3 条）
**改动 B1（提升：R3；防：FM3）**  
- 【隔离来源】“来源/链接/证据/时间戳”仅允许出现在第 2 段；第 1 段出现上述字样即视为失败。

**改动 B2（提升：R5；防：FM5）**  
- 【第三段硬要求】第 3 段必须包含三项关键词：`研究计划`、`分歧点`、`证据对照表`；缺任一项即视为未完成第 3 段任务。

**改动 B3（提升：R7/R6；防：FM6/FM7）**  
- 【去模板废话】禁止出现“好的/下面我将/作为AI/总结一下”等话语；一旦生成，立刻回退并仅输出三段内容。

---

## 4. 局限性与外推边界（写 4–6 条就够）
- L1：样本规模有限（题目数/运行次数），结论主要用于现象与机制假设生成。
- L2：Web UI 环境存在平台默认策略（温度/系统提示不可控），可能影响遵循行为。
- L3：评测包含自动判定与 LLM 评审，仍可能存在偏差（如更长=更像认真）。
- L4：本实验聚焦结构遵循与指令漂移，不代表任务正确性或知识质量。
- L5：结论主要适用于“三段式提示词转译器”类结构化提示任务。

---

## 5. 下一步（可选，保持简短）
- N1：把 FM（失败模式）固化为可复用 taxonomy，并在更多任务/更多模型上验证其稳定性。
- N2：对 P1 做单因素消融（冲突/冗长/弱约束）与 R1–R8 的对应关系验证。
- N3：引入自动化回归：每次修改提示词后跑固定题集，生成合规率趋势图。
