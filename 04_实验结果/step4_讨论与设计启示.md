# Step 4｜讨论与设计启示（最终定版｜Workshop Style）

> 本节**不引入新的实验结果**，仅基于 Step 3 的可复现观察，对三种提示词变体（conflict / long / weak）的漂移模式做“对齐式解释（interpretive alignment）”，并总结可直接复用的结构化提示词设计启示与最小补丁。  
> **注意**：下文所有“机制”均为**工作假设**，用于组织解释与指导下一轮消融，而非因果证明。  
> （整合自三份草稿版本）

---

## 4.1 Key Findings（复盘级结论）

**F1｜三段式外壳通常可保住，但“段落职责边界”是主要失稳点。**  
比起完全不按格式输出，更常见的失败是：**事实段夹带解释/建议**、**解释侵入事实段**、**搜索段/深挖段任务定义模糊**、**段落边界松动导致职责混合**。

**F2｜long 变体在当前题集（Q3/Q4）下综合最均衡：结构稳定 + 可执行 + 深挖可用。**  
其优势更像来自“流程骨架清晰、段落角色可判定”，而不是“更长所以更听话”。

**F3｜conflict 变体典型退化不是结构崩坏，而是事实快照“保守收缩/元描述化”。**  
三段壳能守住，但信息密度下降：更像在描述任务或现象，而非给出可核查结论点。

**F4｜weak 变体的主要问题是深挖段缺少硬钩子，导致“看起来合理的分析话术”替代研究流程。**  
外壳合规并不保证研究产出形态稳定：容易回到默认聊天风格（解释、建议、总结）。

---

## 4.2 Discussion｜机制性解释（对齐式，不做因果证明）

### 4.2.0 解释边界：Observation → Alignment → Working Hypothesis
- **Observation**：来自 Step 3 的复现输出与失败模式记录（段落混合、事实段过长、搜索段定义不清等）。  
- **Alignment**：用文献/社区常见机制类型做“解释框架”，强调一致性而非证明。  
- **Working hypothesis**：把“可能的因果链条”降格为工作假设，用于指导下一轮消融。

---

### 4.2.1 conflict｜多目标/指令冲突下的目标竞争与“保守合规”
**观察（本实验）**
- 三段结构更稳，但事实段更短、更谨慎，且更易出现**元描述化**（描述任务/现象而非结论点）。
- 偶见职责混合：事实段夹带解释、深挖段提前给结论等。

**对齐解释（机制类型）**
- **多目标竞争（multi-objective competition）**：同一输出被同时要求“极简事实 + 生成检索提示词 + 生成广搜提示词 + 多条禁止项”，模型需要在目标间分配输出预算。  
- **风险规避式遵循（conservative compliance）**：约束越多越容易违规，模型倾向选择更安全的策略：减少具体断言、转向更抽象表述。  
- **默认助人先验（helpfulness prior） + 优先级不显式**：若未把“结构任务/段落职责”做成强可判定目标，模型可能回到更熟悉的解释轨道。

**工作假设**
- conflict 增加了“目标竞争压力”，提升模型采用“更安全输出策略（保守/模板化）”的概率；结构能守，但信息密度被牺牲。

---

### 4.2.2 long｜长度 ≠ 控制力：注意力稀释、上下文负载与中段衰减
**观察（本实验）**
- 三段式更少直接崩溃，但更容易出现**段落职责混叠**、**术语/任务类型不清（如深度 vs 联网）**、**提前解释/总结侵入前段**。

**对齐解释（机制类型）**
- **注意力稀释/位置效应（attention dilution / position effects）**：规则多且分散，模型可能只稳定抓住“模板骨架”，忽略细粒度禁令。  
- **上下文负载（cognitive load / context overload）**：目标、边界、格式、禁止项、元解释混在一起，执行粒度下降。  
- **lost-in-the-middle**：中部细则更易被弱化，导致局部漂移（尤其段内边界）。

**工作假设**
- long 的优势来自“关键约束被工程化成可判定骨架”，而非长度本身；一旦术语不统一/规则分散，长提示会变成噪声放大器。

---

### 4.2.3 weak｜规格不充分导致“壳合规、内漂移”：目标替代与自由度回流
**观察（本实验）**
- 硬性结构检查可通过，但深挖段常退化为松散分析/主观总结；事实段更易变长、夹带解释或建议。

**对齐解释（机制类型）**
- **规格不充分（underspecification）**：只要求“三段”，但没定义每段职责与禁区，模型会用默认策略补全（解释 + 建议 + 延展）。  
- **不可判定约束（non-decidable constraints）**：若“合规判据”不够可检查，模型难以自检，只能凭“感觉”写，导致边界模糊。  
- **隐性目标替代（implicit goal substitution）**：把“深挖”理解为“更深入解释”，而非“执行研究流程”。

**工作假设**
- weak 的漂移更多来自“自由度回流到默认助手行为”，不是“故意不听话”。

---

### 4.2.4 结构合规 ≠ 结构稳定：为何外壳不崩仍会 drift
综合三类变体，一个核心现象反复出现：  
**“三段式”这种可见形式能被满足，但段落的语义职责仍可能退化。**

因此，本项目真正需要评测的不是“有没有三段”，而是：
- 每段是否绑定不可替代的动作目标（结论点/检索计划/证据对比）；
- 是否存在可被“语言合理化”的自由度（用泛分析填空）；
- 是否提供可检查的失败条件（否则模型无法自检）。

---

## 4.3 Design Implications｜可直接复用的提示词设计原则

### DI-1｜把“段落角色”写成不可替代的职责声明（Role Boundary），而不只是标题
建议把每段写成“**只允许做 X，禁止做 Y**”的可判定约束：
- **事实快照**：只给可核查结论点；禁止解释/建议/任务描述。  
- **搜索段**：只给检索计划/查询式/来源要求；禁止回答问题本身。  
- **深挖段**：只给研究流程（计划→分歧→证据对比表）；禁止直接长篇结论。

> 目标：把“壳合规”升级为“职责合规”。

---

### DI-2｜为事实快照设置最低信息密度下限，防止元描述退化
在 conflict 的保守收缩风险下，建议硬性规定：
- 至少 **2 条**“可核查结论点”（可带不确定性标记）；  
- 若无法确定，必须显式写：**“需联网核验/以最新信息为准”**；  
- 禁止出现“任务/提示词/模型/段落/输出”等元描述词。

---

### DI-3｜减少规则堆叠：冗余不是免费增强，可能是隐性干扰
尤其对 long：
- 只保留 3–5 条最关键硬约束，放在离输出模板最近的位置；  
- 把“为什么要这样”移出执行区（放到文档/注释），避免诱发解释轨道；  
- **统一术语与任务定义**（例如明确区分“联网检索计划”与“研究性广搜”）。

---

### DI-4｜“先结构、后质量”比“同一轮同时要”更稳健（Structure-first）
推荐两阶段生成（适合后续做消融/工程化）：
1. **Pass 1：只产出骨架**（标题 + 段落占位符 + 长度预算 + 合规检查清单）  
2. **Pass 2：在不改骨架的前提下填充内容**（并再次短自检）

> 目标：降低边写边想导致的段落越界与职责混合。

---

### DI-5｜变体化策略：conflict / long / weak 的差异化修补方向
- **conflict**：减少竞争、显式优先级；允许更短，但不允许事实段“空泛”。  
- **long**：前置关键约束、压缩冗余、统一术语；把细则从执行区搬走。  
- **weak**：补齐最小边界条件（职责禁区 + 深挖硬钩子 + 长度预算），别急着加复杂规则。

---

## 4.4 Minimal Patches（可直接粘贴｜每类 ≤3 条）

> 原则：**“加一句就能显著变稳”**，避免大改造成新变量。

### conflict（目标：提升事实快照信息密度，减少元描述）
1. **事实快照必须包含 ≥2 条可核查结论点；无法确定则写“需联网核验/以最新信息为准”。**  
2. 事实快照段不得出现：任务、提示词、模型、格式、输出、段落等**元描述词**。  
3. 允许结论点，但**禁止推理过程/长解释**（防止解释侵入）。

### long（目标：保持优势，降低段内冗余与越界）
1. 回答必须从 `## 1. [事实快照]` 开始，**禁止任何开场句/题号前缀**。  
2. 第二段**仅**包含检索计划与结构化输出要求，**不得解释机制**。  
3. 第三段必须包含：**研究计划（3–5条）+ 分歧点（≥2组）+ 证据对比表（必须出现表格）**。

### weak（目标：把深挖段从泛分析拉回研究流程）
1. Gemini 段必须先输出**研究计划**，再输出**分歧点**，并给出**证据对比表（必须出现表格）**。  
2. 搜索段必须要求：**交叉验证 ≥2 类来源 + 时间戳 + 可点击链接**（只围绕当前问题）。  
3. 除三段外不得输出任何额外块（包括总结、注意事项、建议）。

---

## 4.5 Threats to Validity（Limitations）

- **题集规模**：当前主要覆盖 Q3/Q4（偏机制/元问题），对一般事实问答/代码/工具调用的外推需谨慎。  
- **采样次数**：若每题每提示词仅一次运行，稳定性结论偏点估计；建议后续做重复运行取均值与方差。  
- **评审偏差**：软性质量（信息密度/可操作性）存在主观阈值；若引入 LLM-as-a-judge 需控长、盲评与一致性检查。  
- **运行条件不可控**：网页端采样参数/系统策略不可完全控，建议在表述上强调“在本实验设置下观察到”。

---

## 4.6 一段式总结（可选）
本实验显示：prompt drift 更常表现为**段落职责的渐进漂移**而非“完全不按格式”。在 weak 下是“壳合规但段内回到默认解释轨道”，在 conflict 下是“合规增强但事实快照保守收缩”，在 long 下是“稳定性来自结构骨架质量而非长度本身”。因此，研究级结构化提示词的关键不在堆规则，而在把约束**工程化为可判定、可检查、可失败**的协议，并优先采用“先结构、后质量”的生成流程，来降低目标竞争与上下文负载引发的漂移风险。
